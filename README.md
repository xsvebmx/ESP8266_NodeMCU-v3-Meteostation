# üå¶Ô∏è ESP8266 NodeMCU v3 Meteostation

–ü—Ä–æ—Å—Ç–∞—è –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏—è –Ω–∞ –±–∞–∑–µ **ESP8266 NodeMCU v3** –∏ –¥–∞—Ç—á–∏–∫–∞ **BME280**, –∫–æ—Ç–æ—Ä–∞—è —É–º–µ–µ—Ç:

* –†–∞–±–æ—Ç–∞—Ç—å –≤ 2 —Ä–µ–∂–∏–º–∞—Ö:
  * **–õ–æ–∫–∞–ª—å–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä—è–º–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.
  * **API-—Ä–µ–∂–∏–º** ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä Flask –∏ —Å—Ç—Ä–æ–∏—Ç –≥—Ä–∞—Ñ–∏–∫–∏.

---

## ‚öôÔ∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ESP8266:

* Wi-Fi: —Ä–µ–∂–∏–º —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ç–∏.
* –ò–∑–º–µ—Ä—è–µ—Ç:

  * –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É (¬∞C)
  * –í–ª–∞–∂–Ω–æ—Å—Ç—å –≤–æ–∑–¥—É—Ö–∞ (%)
  * –î–∞–≤–ª–µ–Ω–∏–µ (–≥–ü–∞ –∏ –º–º —Ä—Ç. —Å—Ç.)
  * –í—ã—Å–æ—Ç—É (–º)
* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–∂–∏–º–∞ –∏ URL —á–µ—Ä–µ–∑ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—É.
* EEPROM –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫.

### Flask-—Å–µ—Ä–≤–µ—Ä:

* –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ POST (`/data`)
* –û—Ç–¥–∞—ë—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–º–µ—Ä—ã (`GET /data`)
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç—Ä–æ–∏—Ç –≥—Ä–∞—Ñ–∏–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ PNG:

  * `/plot/temperature.png`
  * `/plot/humidity.png`
  * `/plot/pressure.png`
  * `/plot/pressure_mmHg.png`
  * `/plot/altitude.png`

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ESP8266_NodeMCU-v3-Meteostation/
‚îú‚îÄ‚îÄ server.py         # Flask —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ data.jsonl        # –ò—Å—Ç–æ—Ä–∏—è –∑–∞–º–µ—Ä–æ–≤ (JSON Lines)
‚îú‚îÄ‚îÄ plots/            # –ì—Ä–∞—Ñ–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ temperature.png
‚îÇ   ‚îú‚îÄ‚îÄ humidity.png
‚îÇ   ‚îú‚îÄ‚îÄ pressure_mmHg.png
‚îÇ   ‚îú‚îÄ‚îÄ pressure.png
‚îÇ   ‚îî‚îÄ‚îÄ temperature.png
‚îú‚îÄ‚îÄ main              # –ö–æ–¥ –¥–ª—è –ø—Ä–æ—à–∏–≤–∫–∏ ESP8266
‚îî‚îÄ‚îÄ README.md         # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ BME280 –∫ ESP8266

| BME280 | ESP8266 NodeMCU v3 |
| ------ | ------------------ |
| VIN    | 3V3                |
| GND    | GND                |
| SDA    | D2 (GPIO4)         |
| SCL    | D1 (GPIO5)         |

–ê–¥—Ä–µ—Å I2C –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `0x76`

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ BME280 –∏ –ø—Ä–æ—à–µ–π—Ç–µ ESP8266

* –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–¥ –∏–∑ `main`
* –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞:

  * SSID: `NodeConfig`
  * –ü–∞—Ä–æ–ª—å: `12345678`

–ó–∞–π–¥–∏—Ç–µ –Ω–∞ [http://192.168.4.1](http://192.168.4.1), –≤—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã:

* `L` ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–π (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/data`)
* `A` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä Flask

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Flask-—Å–µ—Ä–≤–µ—Ä

```bash
pip install flask pandas matplotlib
python server.py
```

–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è, –≥—Ä–∞—Ñ–∏–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## üì° –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö (API)

* **POST /data**

  * `Content-Type: application/json`
  * –ü—Ä–∏–º–µ—Ä:

    ```json
    {
      "temperature": 24.7,
      "humidity": 45.1,
      "pressure": 1010.2,
      "pressure_mmHg": 757.7,
      "altitude": 128.3
    }
    ```

* **GET /data** ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–º–µ—Ä

* **GET /plot/{param}.png** ‚Äî –æ—Ç–¥–∞—ë—Ç –≥—Ä–∞—Ñ–∏–∫ –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—É

---

## –í—ã–≤–æ–¥ –≥—Ä–∞—Ñ–∏–∫–æ–≤

–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
![temperature](plots/temperature.png)
–í–ª–∞–∂–Ω–æ—Å—Ç—å
![humidity](plots/humidity.png)
–î–∞–≤–ª–µ–Ω–∏–µ (–≥–ü–∞)
![pressure](plots/pressure.png) 
–î–∞–≤–ª–µ–Ω–∏–µ (–º–º —Ä—Ç. —Å—Ç.) 
![pressure\_mmHg](plots/pressure_mmHg.png) 
–í—ã—Å–æ—Ç–∞
![altitude](plots/altitude.png)

---