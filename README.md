# üå¶Ô∏è ESP8266 NodeMCU v3 Meteostation: –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫ –ø—Ä–æ–µ–∫—Ç—É –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏–∏ –Ω–∞ –±–∞–∑–µ **ESP8266 NodeMCU v3** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –¥–∞—Ç—á–∏–∫–∞ **BME280**. –ú–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏—è —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ, –≤–ª–∞–∂–Ω–æ—Å—Ç–∏, –¥–∞–≤–ª–µ–Ω–∏–∏ –∏ –≤—ã—Å–æ—Ç–µ, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä Flask —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π, —Ç–∞–∫–∂–µ –≤–∫–ª—é—á–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–±—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –∏ API.

---

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ú–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏—è –Ω–∞ –±–∞–∑–µ **ESP8266 NodeMCU v3** –∏ –¥–∞—Ç—á–∏–∫–∞ **BME280** –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ–≥–æ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π. –û–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¥–≤—É—Ö —Ä–µ–∂–∏–º–∞—Ö:

- **–õ–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º (Local Mode)**: –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
- **API-—Ä–µ–∂–∏–º (API Mode)**: –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä Flask, –≥–¥–µ –æ–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –≤ –≤–∏–¥–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤.

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏–∏:
- **–ê—Ä—Ö–∏–≤–∞—Ü–∏—è –∏ —Å–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö**: –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∏ –≥—Ä–∞—Ñ–∏–∫–∏ –≤ –ø–∞–ø–∫—É `archives` —Å –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –æ—á–∏—Å—Ç–∫–æ–π —á–µ—Ä–µ–∑ API-–∑–∞–ø—Ä–æ—Å –∏–ª–∏ –∫–Ω–æ–ø–∫—É –Ω–∞ –ø–∏–Ω–µ D6.
- **–ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö**: –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ –ø–∏–Ω—É D6, –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –∞—Ä—Ö–∏–≤–∞—Ü–∏—é –∏ —Å–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

---

## ‚öôÔ∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ESP8266 NodeMCU
- **Wi-Fi**:
  - –†–µ–∂–∏–º —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞ (AP) —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º SSID –∏ –ø–∞—Ä–æ–ª–µ–º.
  - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π Wi-Fi —Å–µ—Ç–∏ (STA).
- **–ò–∑–º–µ—Ä—è–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**:
  - –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (¬∞C)
  - –í–ª–∞–∂–Ω–æ—Å—Ç—å –≤–æ–∑–¥—É—Ö–∞ (%)
  - –î–∞–≤–ª–µ–Ω–∏–µ (–≥–ü–∞ –∏ –º–º —Ä—Ç. —Å—Ç.)
  - –í—ã—Å–æ—Ç–∞ –Ω–∞–¥ —É—Ä–æ–≤–Ω–µ–º –º–æ—Ä—è (–º)
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞**:
  - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞ (–ª–æ–∫–∞–ª—å–Ω—ã–π –∏–ª–∏ API), –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Wi-Fi, —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∏ URL —Å–µ—Ä–≤–µ—Ä–∞.
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ EEPROM.
- **–ö–Ω–æ–ø–∫–∏**:
  - –°–±—Ä–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫ (D7): —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ —É–¥–µ—Ä–∂–∞–Ω–∏–∏ –≤–æ –≤—Ä–µ–º—è –≤–∫–ª—é—á–µ–Ω–∏—è.
  - –°–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö (D6): –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏ –∏ –æ—á–∏—Å—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö.
- **–ò–Ω–¥–∏–∫–∞—Ü–∏—è**: –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–≤–µ—Ç–æ–¥–∏–æ–¥ –º–∏–≥–∞–µ—Ç –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫).

### Flask-—Å–µ—Ä–≤–µ—Ä
- **–ü—Ä–∏–µ–º –¥–∞–Ω–Ω—ã—Ö**: POST-–∑–∞–ø—Ä–æ—Å—ã –Ω–∞ `/data`.
- **–í–æ–∑–≤—Ä–∞—Ç –¥–∞–Ω–Ω—ã—Ö**: GET-–∑–∞–ø—Ä–æ—Å –Ω–∞ `/data` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–º–µ—Ä—ã.
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ PNG:
  - `/plot/temperature.png`
  - `/plot/humidity.png`
  - `/plot/pressure.png`
  - `/plot/pressure_mmHg.png`
  - `/plot/altitude.png`
- **–ê—Ä—Ö–∏–≤–∞—Ü–∏—è –∏ —Å–±—Ä–æ—Å**:
  - Endpoint `/change-results` –∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ (`data.jsonl`) –∏ –≥—Ä–∞—Ñ–∏–∫–∏ (`plots`) –≤ –ø–∞–ø–∫—É `archives` —Å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–æ–π, –∑–∞—Ç–µ–º –æ—á–∏—â–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∏ –≥—Ä–∞—Ñ–∏–∫–∏.

---

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
- **ESP8266 NodeMCU v3**
- **–î–∞—Ç—á–∏–∫ BME280** (I2C, –∞–¥—Ä–µ—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `0x76`)
- –î–≤–µ –∫–Ω–æ–ø–∫–∏ (–¥–ª—è —Å–±—Ä–æ—Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ –¥–∞–Ω–Ω—ã—Ö)
- USB-–∫–∞–±–µ–ª—å –¥–ª—è –ø—Ä–æ—à–∏–≤–∫–∏ –∏ –ø–∏—Ç–∞–Ω–∏—è
- –ö–æ–º–ø—å—é—Ç–µ—Ä –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Flask
- –ü—Ä–æ–≤–æ–¥–∞ –∏ –º–∞–∫–µ—Ç–Ω–∞—è –ø–ª–∞—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ
- **Arduino IDE** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π ESP8266
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ Arduino**:
  - `Adafruit_BME280`
  - `ESP8266WiFi`
  - `ESP8266WebServer`
  - `EEPROM`
  - `Wire`
  - `ESP8266HTTPClient`
- **Python 3.x**
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ Python**:
  - `flask`
  - `pandas`
  - `matplotlib`
  - `shutil`
- –ö–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞:
  - `weather_station.ino` (–ø—Ä–æ—à–∏–≤–∫–∞ ESP8266)
  - `server.py` (Flask-—Å–µ—Ä–≤–µ—Ä)

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ESP8266_NodeMCU-v3-Meteostation/
‚îú‚îÄ‚îÄ server.py           # Flask-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ data.jsonl          # –ò—Å—Ç–æ—Ä–∏—è –∑–∞–º–µ—Ä–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON Lines
‚îú‚îÄ‚îÄ plots/              # –ü–∞–ø–∫–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ temperature.png # –ì—Ä–∞—Ñ–∏–∫ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ humidity.png    # –ì—Ä–∞—Ñ–∏–∫ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ pressure.png    # –ì—Ä–∞—Ñ–∏–∫ –¥–∞–≤–ª–µ–Ω–∏—è –≤ –≥–ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ pressure_mmHg.png # –ì—Ä–∞—Ñ–∏–∫ –¥–∞–≤–ª–µ–Ω–∏—è –≤ –º–º —Ä—Ç. —Å—Ç.
‚îÇ   ‚îî‚îÄ‚îÄ altitude.png    # –ì—Ä–∞—Ñ–∏–∫ –≤—ã—Å–æ—Ç—ã
‚îú‚îÄ‚îÄ archives/           # –ü–∞–ø–∫–∞ –¥–ª—è –∞—Ä—Ö–∏–≤–æ–≤ –¥–∞–Ω–Ω—ã—Ö –∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ archive_YYYY-MM-DD_HH-MM-SS/ # –ü–∞–ø–∫–∞ —Å –∞—Ä—Ö–∏–≤–æ–º –ø–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data.jsonl               # –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ plots/                   # –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏
‚îú‚îÄ‚îÄ weather_station.ino # –ö–æ–¥ –ø—Ä–æ—à–∏–≤–∫–∏ –¥–ª—è ESP8266
‚îî‚îÄ‚îÄ README.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
```

---

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è

| –ü–∏–Ω BME280 | –ü–∏–Ω ESP8266 NodeMCU v3 |
|------------|------------------------|
| VIN        | 3V3                   |
| GND        | GND                   |
| SDA        | D2 (GPIO4)            |
| SCL        | D1 (GPIO5)            |


| –ö–Ω–æ–ø–∫–∞              | –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ           |
|---------------------|-----------------------|
| –°–±—Ä–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫      | D7 (GPIO13) ‚Äî GND     |
| –°–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö        | D6 (GPIO12) ‚Äî GND     |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∞–¥—Ä–µ—Å I2C –¥–∞—Ç—á–∏–∫–∞ BME280 ‚Äî `0x76`. –ï—Å–ª–∏ –∞–¥—Ä–µ—Å –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `0x77`), –∏–∑–º–µ–Ω–∏—Ç–µ `#define BME_ADDR` –≤ –∫–æ–¥–µ.

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –ø—Ä–æ—à–∏–≤–∫–∞ ESP8266
1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –¥–∞—Ç—á–∏–∫ BME280 –∏ –∫–Ω–æ–ø–∫–∏ –∫ ESP8266 —Å–æ–≥–ª–∞—Å–Ω–æ —Å—Ö–µ–º–µ.
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Arduino IDE –∏ –¥–æ–±–∞–≤—å—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø–ª–∞—Ç ESP8266.
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
   ```bash
   Arduino IDE ‚Üí Sketch ‚Üí Include Library ‚Üí Manage Libraries
   ```
   –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: `Adafruit_BME280`, `ESP8266WiFi`, `ESP8266WebServer`, `EEPROM`, `Wire`, `ESP8266HTTPClient`.
4. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª `weather_station.ino` –≤ Arduino IDE.
5. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ ESP8266 —á–µ—Ä–µ–∑ USB –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ—à–∏–≤–∫—É.

–ü–æ—Å–ª–µ –ø—Ä–æ—à–∏–≤–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å–æ–∑–¥–∞—Å—Ç —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞:
- **SSID**: `Meteostation`
- **–ü–∞—Ä–æ–ª—å**: `12345678`

6. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Ç–æ—á–∫–µ –¥–æ—Å—Ç—É–ø–∞ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–ª–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞.
7. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É: [http://192.168.4.1](http://192.168.4.1).
8. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
   - **–†–µ–∂–∏–º**: `L` (–ª–æ–∫–∞–ª—å–Ω—ã–π) –∏–ª–∏ `A` (API).
   - **Wi-Fi SSID –∏ –ø–∞—Ä–æ–ª—å**: –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –≤–∞—à–µ–π —Å–µ—Ç–∏.
   - **AP SSID –∏ –ø–∞—Ä–æ–ª—å**: –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞.
   - **API URL**: –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `http://192.168.0.129:5000/data`).
9. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å". –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è.

### 2. –°–±—Ä–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –£–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∞ –ø–∏–Ω–µ **D7** –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, —á—Ç–æ–±—ã —Å–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
  - –†–µ–∂–∏–º: `L` (–ª–æ–∫–∞–ª—å–Ω—ã–π)
  - AP SSID: `Meteostation`
  - AP –ü–∞—Ä–æ–ª—å: `12345678`
  - Wi-Fi SSID: `your_SSID`
  - Wi-Fi –ü–∞—Ä–æ–ª—å: `your_PASSWORD`
  - API URL: `http://192.168.0.129:5000/data`

### 3. –ó–∞–ø—É—Å–∫ Flask-—Å–µ—Ä–≤–µ—Ä–∞
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.x.
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install flask pandas matplotlib
   ```
3. –ü–æ–º–µ—Å—Ç–∏—Ç–µ `server.py` –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞.
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
   ```bash
   python server.py
   ```
   –°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `http://<IP-—Å–µ—Ä–≤–µ—Ä–∞>:5000`.

---

## üì° –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏–∏

### –õ–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º
1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Ç–æ—á–∫–µ –¥–æ—Å—Ç—É–ø–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `Valkyrja v1 Meteostation`).
2. –û—Ç–∫—Ä–æ–π—Ç–µ [http://192.168.4.1](http://192.168.4.1) –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [http://192.168.4.1/data](http://192.168.4.1/data) –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö:
   - –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (¬∞C)
   - –í–ª–∞–∂–Ω–æ—Å—Ç—å (%)
   - –î–∞–≤–ª–µ–Ω–∏–µ (–º–º —Ä—Ç. —Å—Ç. –∏ –≥–ü–∞)
   - –í—ã—Å–æ—Ç–∞ (–º)

### API-—Ä–µ–∂–∏–º
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä Flask –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω.
2. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã —á–µ—Ä–µ–∑ POST-–∑–∞–ø—Ä–æ—Å—ã.
3. –î–æ—Å—Ç—É–ø–Ω—ã–µ endpoint‚Äô—ã:
   - **POST `/data`**: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON:
     ```json
     {
       "temperature": 24.7,
       "humidity": 45.1,
       "pressure": 1010.2,
       "pressure_mmHg": 757.7,
       "altitude": 128.3
     }
     ```
     –û—Ç–≤–µ—Ç: `{"status": "ok"}`
   - **GET `/data`**: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ:
     ```json
     {
       "temperature": 24.7,
       "humidity": 45.1,
       "pressure": 1010.2,
       "pressure_mmHg": 757.7,
       "altitude": 128.3,
       "timestamp": "2025-07-19T15:57:00"
     }
     ```
   - **GET `/plot/<param>.png`**: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥—Ä–∞—Ñ–∏–∫ –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ (`temperature`, `humidity`, `pressure`, `pressure_mmHg`, `altitude`).
   - **GET `/change-results`**: –∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –≥—Ä–∞—Ñ–∏–∫–∏, –∑–∞—Ç–µ–º –æ—á–∏—â–∞–µ—Ç –∏—Ö. –û—Ç–≤–µ—Ç: `{"status": "archived and reset"}`.

### –°–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö
- –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∞ –ø–∏–Ω–µ **D6** (–ø–æ–¥–∫–ª—é—á–µ–Ω–∞ —Å –ø–æ–¥—Ç—è–∂–∫–æ–π –∫ HIGH), —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å GET-–∑–∞–ø—Ä–æ—Å –Ω–∞ `/change-results`. –≠—Ç–æ:
  1. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–∫—É—â–∏–π —Ñ–∞–π–ª `data.jsonl` –∏ –ø–∞–ø–∫—É `plots` –≤ `archives/archive_YYYY-MM-DD_HH-MM-SS`.
  2. –£–¥–∞–ª—è–µ—Ç —Ç–µ–∫—É—â–∏–µ `data.jsonl` –∏ –ø–∞–ø–∫—É `plots`.
  3. –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –ø—É—Å—Ç—É—é –ø–∞–ø–∫—É `plots`.
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–≤–µ—Ç–æ–¥–∏–æ–¥ –º–∏–≥–∞–µ—Ç –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è.

---

## üõ†Ô∏è –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

1. **–ê—Ä—Ö–∏–≤–∞—Ü–∏—è –∏ —Å–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö**:
   - **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ**: Endpoint `/change-results` —Å–æ–∑–¥–∞–µ—Ç –∞—Ä—Ö–∏–≤ —Å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–æ–π –≤ –ø–∞–ø–∫–µ `archives` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `archives/archive_2025-07-19_15-57-00`). –°—é–¥–∞ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è `data.jsonl` –∏ –ø–∞–ø–∫–∞ `plots`. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∏ –≥—Ä–∞—Ñ–∏–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è, –∞ –ø–∞–ø–∫–∞ `plots` —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ.
   - **–ù–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ**: –ö–Ω–æ–ø–∫–∞ –Ω–∞ –ø–∏–Ω–µ D6 –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ —ç—Ç–æ—Ç endpoint, –∏–Ω–∏—Ü–∏–∏—Ä—É—è –∞—Ä—Ö–∏–≤–∞—Ü–∏—é –∏ —Å–±—Ä–æ—Å.

2. **–ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö**:
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ –ø–∏–Ω—É **D6 (GPIO12)** —Å –ø–æ–¥—Ç—è–∂–∫–æ–π –∫ HIGH.
   - –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç GET-–∑–∞–ø—Ä–æ—Å –Ω–∞ `/change-results`, –º–∏–≥–∞–µ—Ç —Å–≤–µ—Ç–æ–¥–∏–æ–¥ –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ü–∏–∏.

---

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π

| –ü—Ä–æ–±–ª–µ–º–∞                              | –í–æ–∑–º–æ–∂–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞                     | –†–µ—à–µ–Ω–∏–µ                                                                 |
|---------------------------------------|---------------------------------------|-------------------------------------------------------------------------|
| –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞   | –û—à–∏–±–∫–∞ –≤ –ø—Ä–æ—à–∏–≤–∫–µ                    | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–¥, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –ø–µ—Ä–µ–ø—Ä–æ—à–µ–π—Ç–µ.                     |
| –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ—Ç BME280                  | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏–ª–∏ –∞–¥—Ä–µ—Å   | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ–≤–æ–¥–∞, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∞–¥—Ä–µ—Å I2C ‚Äî `0x76`.                   |
| –ù–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Wi-Fi               | –ù–µ–≤–µ—Ä–Ω—ã–π SSID/–ø–∞—Ä–æ–ª—å                 | –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —á–µ—Ä–µ–∑ [http://192.168.4.1](http://192.168.4.1).               |
| –°–µ—Ä–≤–µ—Ä –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ             | –ù–µ–≤–µ—Ä–Ω—ã–π URL –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω   | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω.                           |
| –ì—Ä–∞—Ñ–∏–∫–∏ –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è                | –û—à–∏–±–∫–∞ –≤ `server.py`                 | –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `pandas` –∏ `matplotlib` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏.     |
| –ê—Ä—Ö–∏–≤–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç                 | –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –∏–ª–∏ –ø–∞–ø–∫–æ–π        | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ –ø–∞–ø–∫—É `archives`, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `shutil` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. |
| –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç      | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ D6          | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∏–Ω –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–∞–∫ INPUT_PULLUP. |

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –≥—Ä–∞—Ñ–∏–∫–æ–≤

- **–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞**:  
  ![temperature](plots/temperature.png)
- **–í–ª–∞–∂–Ω–æ—Å—Ç—å**:  
  ![humidity](plots/humidity.png)
- **–î–∞–≤–ª–µ–Ω–∏–µ (–≥–ü–∞)**:  
  ![pressure](plots/pressure.png)
- **–î–∞–≤–ª–µ–Ω–∏–µ (–º–º —Ä—Ç. —Å—Ç.)**:  
  ![pressure_mmHg](plots/pressure_mmHg.png)
- **–í—ã—Å–æ—Ç–∞**:  
  ![altitude](plots/altitude.png)

---
